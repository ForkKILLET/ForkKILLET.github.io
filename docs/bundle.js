(()=>{var k=Object.defineProperty;var M=(r,e,t)=>e in r?k(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t;var m=(r,e,t)=>(M(r,typeof e!="symbol"?e+"":e,t),t);var T=async(r,e="text",t)=>await(await fetch("/FkData/"+r,t))[e](),L=r=>{let e=!1;if(r.startsWith("//"))e=!0;else if(location.hostname==="localhost"){let t=r.split("/");!t[0]&&["HardWayNazo","TrainProblemEmulator"].includes(t[1])?t=[...t.slice(0,2),"docs",...t.slice(2)]:t.unshift("docs"),t.slice(-1)[0].endsWith(".html")||t.push("index.html"),r=t.join("/")}window.open(r,e?"_blank":"_self")};var E=(r,...e)=>e.length?E(e[0](r),...e.slice(1)):r,h=(...r)=>E(Object,...r),g=(r,e)=>t=>class extends(t??Object){log(i,...n){console.log(`%c${r}%c ${i}`,`
border-radius: 7px;
padding: 1px 3px;
color: white;
background-color: ${e};
box-shadow: 0 0 5px white;
`,"",...n)}err(...i){console.error(`%c${r}`,`
border-radius: 7px;
padding: 1px 3px;
color: white;
background-color: ${e};
box-shadow: 0 0 5px red;
`,...i)}},p=(r,e)=>t=>class extends(t??Object){name;static async fromData(i){let n=new this(await T(r+i+e));return n.name=i,n}};var l=class extends h(g("icon","orange"),p("icon/",".tico")){dotColor={"#":"black"," ":"white",R:"red",r:"darksalmon",B:"blue",b:"cornflowerblue",M:"rebeccapurple",m:"magenta","9":"grey",G:"green",g:"lightgreen"};matrix;name;constructor(e){super();let t=e.split(`
`),i=t[0]==="<<<"?{}:JSON.parse(t[0]),n=t.slice(t.findIndex(o=>o==="<<<")+1,t.findIndex(o=>o===">>>"));i.color&&Object.assign(this.dotColor,i.color),this.matrix=n.map(o=>o.split("").map(a=>this.dotColor[a]))}paint(e){this.log("Painting icon. name: `%s`",this.name),e.width=this.matrix[0].length*l.dotSize,e.height=this.matrix.length*l.dotSize;let t=e.getContext("2d");for(let i=0;i<this.matrix.length;i++)for(let n=0;n<this.matrix[i].length;n++)t.fillStyle=this.matrix[i][n],t.fillRect(n*l.dotSize,i*l.dotSize,l.dotSize,l.dotSize)}},u=l;m(u,"dotSize",4);var b=class extends h(g("wlog","cornflowerblue"),p("wlog/",".md")){constructor(e){super();this.text=e}parse(){this.log("Parsing wlog. name: `%s`",this.name);let e=(n,o,a)=>{n=n.replace(/[.*+?]/g,f=>"\\"+f);let d=String.raw`(?<!\\)((?:\\\\)*)`+n,x=`\\\\([\\${n[0]}])`;return[RegExp(d+`(${o?"[^\\n]":"."}+?)`+d,"g"),(f,C,$)=>a($.replace(RegExp(x,"g"),(S,v)=>v))]},t=[[/^#! (\S+\/)+\n/m,(n,o)=>o.split("/").map(a=>a?`<mark>${a}</mark>`:"").join("")],[/^(#{1,6}) (.+)$/mg,(n,o,a)=>{let d="h"+o.length;return`<${d}>${a}</${d}>`}],e("`",!0,n=>`<code>${n}</code>`),e("**",!1,n=>`<strong>${n}</strong>`),e("_",!1,n=>`<em>${n}</em>`),[/ {2}\n/g,"<br />"]],i=[];return t.reduce((n,o)=>n.replace(o[0],(...a)=>(i.push(typeof o[1]=="function"?o[1](...a):o[1]),`@@${i.length-1}@@`)),this.text).replace(/@@(\d+)@@/g,(n,o)=>i[+o])}};var w=class extends h(g("node","forestgreen")){constructor(e){super();this.parent=e;this.parent&&this.parent.children.push(this),this.layer=(e?.layer??-1)+1}qRenderCb=[];q(e){return this.qRenderCb.push(e),this}render(){this.parent&&!this.parent.e&&this.err("Rendering without parent rendered."),this.e=document.createElement("div"),this.e.classList.add("node"),this.eContent=document.createElement("div"),this.eContent.classList.add("node-content"),this.e.appendChild(this.eContent),this.eChildren=document.createElement("div"),this.eChildren.classList.add("node-children"),this.e.appendChild(this.eChildren),this.e.style.backgroundColor=w.layerColor[this.layer],this.qRenderCb.forEach(e=>e({e:this.e,c:this.eContent})),(this.parent?.eChildren??document.body).appendChild(this.e),this.log(`Rendering node at layer ${this.layer}. content:`,this.eContent.innerText),this.children.forEach(e=>e.render())}e;eContent;eChildren;layer;children=[];title(e){return this.q(({c:t})=>{let i=document.createElement("div");i.classList.add("node-content-text"),i.innerText=e,t.appendChild(i)})}link(e){return this.class("link").q(({e:t})=>t.addEventListener("click",()=>L(e)))}class(e){return this.q(({e:t})=>t.classList.add(e))}async icon(e){let t=await u.fromData(e);return this.q(({c:i})=>{let n=document.createElement("canvas");n.classList.add("node-content-icon"),i.appendChild(n),t.paint(n)})}async wlog(e){let t=await b.fromData(e);return this.q(({c:i})=>{let n=document.createElement("div");n.innerHTML=t.parse(),n.classList.add("node-content-wlog"),i.appendChild(n)})}},y=w;m(y,"layerColor",["white","white","aliceblue","cornflowerblue","lightgrey"]);var s=r=>new y(r),c=s(null).class("top");var D=async()=>{let r=await s(c).title("IceLavaTop").icon("il"),e=s(c).title("Games"),t=await s(e).title("HardWayNazo").link("/HardWayNazo").icon("hwn"),i=await s(e).title("TrolleyProblemEmulator").link("/TrolleyProblemEmulator").icon("tpe"),n=await s(e).title("SudoerOfMyself").link("/SudoerOfMyself").icon("som"),o=s(c).title("Novels"),a=s(o).title("TerminalXbqg").link("//github.com/ForkKILLET/TerminalXbqg"),d=s(c).title("Friends"),x=s(c).title("About OI"),f=await s(x).title("Extend Luogu").link("//github.com/optimize-2/extend-luogu").icon("exlg"),C=s(c).title("Fork\u03A8KILLET's wlog"),$=await s(C).wlog("home");c.render()};window.addEventListener("load",D);})();
//# sourceMappingURL=bundle.js.map
