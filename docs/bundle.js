(()=>{var k=Object.defineProperty;var D=(r,t,e)=>t in r?k(r,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):r[t]=e;var p=(r,t,e)=>(D(r,typeof t!="symbol"?t+"":t,e),e);var C=async(r,t="text",e)=>await(await fetch("/FkData/"+r,e))[t](),$=r=>{let t=!1;if(r.startsWith("//"))t=!0;else if(location.hostname==="localhost"){let e=r.split("/");!e[0]&&["HardWayNazo","TrainProblemEmulator"].includes(e[1])?e=[...e.slice(0,2),"docs",...e.slice(2)]:e.unshift("docs"),e.slice(-1)[0].endsWith(".html")||e.push("index.html"),r=e.join("/")}window.open(r,t?"_blank":"_self")};var T=(r,...t)=>t.length?T(t[0](r),...t.slice(1)):r,h=(...r)=>T(Object,...r),g=(r,t)=>e=>class extends(e??Object){log(i,...n){console.log(`%c${r}%c ${i}`,`
border-radius: 7px;
padding: 1px 3px;
color: white;
background-color: ${t};
box-shadow: 0 0 5px white;
`,"",...n)}err(...i){console.error(`%c${r}`,`
border-radius: 7px;
padding: 1px 3px;
color: white;
background-color: ${t};
box-shadow: 0 0 5px red;
`,...i)}},u=(r,t)=>e=>class extends(e??Object){name;static async fromData(i){let n=new this(await C(r+i+t));return n.name=i,n}};var l=class extends h(g("icon","orange"),u("icon/",".tico")){dotColor={"#":"black"," ":"white",R:"red",r:"darksalmon",B:"blue",b:"cornflowerblue",M:"rebeccapurple",m:"magenta",G:"grey"};matrix;name;constructor(t){super();let e=t.split(`
`),i=e[0]==="<<<"?{}:JSON.parse(e[0]),n=e.slice(e.findIndex(o=>o==="<<<")+1,e.findIndex(o=>o===">>>"));i.color&&Object.assign(this.dotColor,i.color),this.matrix=n.map(o=>o.split("").map(a=>this.dotColor[a]))}paint(t){this.log("Painting icon. name: `%s`",this.name),t.width=this.matrix[0].length*l.dotSize,t.height=this.matrix.length*l.dotSize;let e=t.getContext("2d");for(let i=0;i<this.matrix.length;i++)for(let n=0;n<this.matrix[i].length;n++)e.fillStyle=this.matrix[i][n],e.fillRect(n*l.dotSize,i*l.dotSize,l.dotSize,l.dotSize)}},x=l;p(x,"dotSize",4);var b=class extends h(g("wlog","cornflowerblue"),u("wlog/",".md")){constructor(t){super();this.text=t}parse(){this.log("Parsing wlog. name: `%s`",this.name);let t=(n,o,a)=>{n=n.replace(/[.*+?]/g,m=>"\\"+m);let d=String.raw`(?<!\\)((?:\\\\)*)`+n,w=`\\\\([\\${n[0]}])`;return[RegExp(d+`(${o?"[^\\n]":"."}+?)`+d,"g"),(m,L,E)=>a(E.replace(RegExp(w,"g"),(I,v)=>v))]},e=[[/^#! (\S+\/)+\n/m,(n,o)=>o.split("/").map(a=>a?`<mark>${a}</mark>`:"").join("")],[/^(#{1,6}) (.+)$/mg,(n,o,a)=>{let d="h"+o.length;return`<${d}>${a}</${d}>`}],t("`",!0,n=>`<code>${n}</code>`),t("**",!1,n=>`<strong>${n}</strong>`),t("_",!1,n=>`<em>${n}</em>`),[/ {2}\n/g,"<br />"]],i=[];return e.reduce((n,o)=>n.replace(o[0],(...a)=>(i.push(typeof o[1]=="function"?o[1](...a):o[1]),`@@${i.length-1}@@`)),this.text).replace(/@@(\d+)@@/g,(n,o)=>i[+o])}};var y=class extends h(g("node","forestgreen")){constructor(t){super();this.parent=t;this.parent&&this.parent.children.push(this),this.layer=(t?.layer??-1)+1}qRenderCb=[];q(t){return this.qRenderCb.push(t),this}render(){this.parent&&!this.parent.e&&this.err("Rendering without parent rendered."),this.e=document.createElement("div"),this.e.classList.add("node"),this.eContent=document.createElement("div"),this.eContent.classList.add("node-content"),this.e.appendChild(this.eContent),this.eChildren=document.createElement("div"),this.eChildren.classList.add("node-children"),this.e.appendChild(this.eChildren),this.e.style.backgroundColor=y.layerColor[this.layer],this.qRenderCb.forEach(t=>t({e:this.e,c:this.eContent})),(this.parent?.eChildren??document.body).appendChild(this.e),this.log(`Rendering node at layer ${this.layer}. content:`,this.eContent.innerText),this.children.forEach(t=>t.render())}e;eContent;eChildren;layer;children=[];title(t){return this.q(({c:e})=>{let i=document.createElement("div");i.classList.add("node-content-text"),i.innerText=t,e.appendChild(i)})}link(t){return this.class("link").q(({e})=>e.addEventListener("click",()=>$(t)))}class(t){return this.q(({e})=>e.classList.add(t))}async icon(t){let e=await x.fromData(t);return this.q(({c:i})=>{let n=document.createElement("canvas");n.classList.add("node-content-icon"),i.appendChild(n),e.paint(n)})}async wlog(t){let e=await b.fromData(t);return this.q(({c:i})=>{let n=document.createElement("div");n.innerHTML=e.parse(),n.classList.add("node-content-wlog"),i.appendChild(n)})}},f=y;p(f,"layerColor",["white","white","aliceblue","cornflowerblue","lightgrey"]);var s=r=>new f(r),c=s(null).class("top");var M=async()=>{let r=await s(c).title("IceLavaTop").icon("il"),t=s(c).title("Games"),e=await s(t).title("HardWayNazo").link("/HardWayNazo").icon("hwn"),i=await s(t).title("TrainProblemEmulator").link("/TrolleyProblemEmulator").icon("tpe"),n=s(c).title("Novels"),o=s(n).title("TerminalXbqg").link("//github.com/ForkKILLET/TerminalXbqg"),a=s(c).title("Friends"),d=s(c).title("About OI"),w=await s(d).title("Extend Luogu").link("//github.com/optimize-2/extend-luogu").icon("exlg"),m=s(c).title("Fork\u03A8KILLET's wlog"),L=await s(m).wlog("home");c.render()};window.addEventListener("load",M);})();
//# sourceMappingURL=bundle.js.map
