import{d as xe,a as w,u as U,b as ae,c as D,r as y,o as G,e as Z,f as n,g as a,h as u,i as c,t as g,j as K,k as S,w as N,T as oe,l as P,m as Oe,K as Be,n as J,p as ee,q as Ke,F as I,s as E,v as L,x as $,y as re,z as ie,A as Q,B as He,C as ne,D as ce,E as Re,G as Ve,H as ke,I as le,J as $e,L as ze,M as Ue,_ as Se,P as me,N as Ie,O as qe,Q as De,R as Le,S as he,U as Ge,V as je,W as Pe,X as Je,Y as Ye,Z as We}from"./vendor-39cd1860.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const l of i.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function o(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=o(s);fetch(s.href,i)}})();const Xe={scrollBehavior:{type:"union",options:["smooth","auto"]},sidebarMode:{type:"union",options:["manual","auto"]}},Qe={scrollBehavior:"smooth",sidebarMode:"auto"},de=xe("settings",{state:()=>{const t=localStorage.getItem("icelavaSettings"),e=t?JSON.parse(t):{};return{...Qe,...e}},actions:{updateSettings(){localStorage.setItem("icelavaSettings",JSON.stringify(this.$state))}}}),Ze={class:"home"},et={key:0},tt={key:1},st=w({__name:"Home",setup(t){const{t:e}=U(),o=ae(),r=D(()=>o.params.id),s=y(!1);return G(()=>{var i;(i=document.querySelector("main"))==null||i.focus()}),(i,l)=>{const d=Z("RouterView");return n(),a("div",Ze,[u("h1",null,[c(o).name?(n(),a("span",et,g(c(e)("route."+c(o).name)),1)):K("",!0),c(r)?(n(),a("small",tt,"/ "+g(c(r)),1)):K("",!0)]),u("main",{class:J({entering:s.value}),tabindex:"0"},[S(d,null,{default:N(({Component:m})=>[S(oe,{name:"float",onBeforeEnter:l[0]||(l[0]=h=>s.value=!0),onAfterEnter:l[1]||(l[1]=h=>s.value=!1)},{default:N(()=>[(n(),P(Be,null,[(n(),P(Oe(m),{key:c(o).path}))],1024))]),_:2},1024)]),_:1})],2)])}}});const H=(t,e)=>{const o=t.__vccOpts||t;for(const[r,s]of e)o[r]=s;return o},ot=H(st,[["__scopeId","data-v-c6574444"]]),Te=(t,e)=>{t="icelava"+t.replace(/^[a-z]/,s=>s.toUpperCase());let o;const r=localStorage.getItem(t);return r?o=y(JSON.parse(r)):o=y(e),ee(o,()=>{localStorage.setItem(t,JSON.stringify(o.value))},{immediate:!0}),o},nt={filter:"Filter","unread-only":"unread only",sort:"Sort","tag-cloud":"Tag Cloud","sort-method":{default:"default",newest:"newest",oldest:"oldest"}},at={update:"You got {0} update(s)!",dev:"Dev mode on {0}",welcome:"Welcome to pretty new icelava.top ~ (ζ{0})","keyboard-ins":"Press ? to see keyboard instructions"},rt={"log-count":"Found {0} log(s).","log-title":"Title","update-state":{unread:"Unread",updated:"Updated",recent:"Recent"},"keyboard-ins":"Keyboard Instruction","loading-cuiping":"Loading Cuiping...","loading-katex":"Loading KaTeX...","build-info":"Ver {0} made by {1} with Vue at {2} on {3}"},it={friends:"Friends",tags:"Tags",home:"Home"},ct={home:"Home",log:"Logs",tags:"Tags","not-found":"Not found",settings:"Settings"},lt={names:{scrollBehavior:"Scroll behavior",sidebarMode:"Sidebar Mode"},options:{smooth:"Smooth",auto:"Auto",manual:"Manual"}},dt={op:nt,noti:at,msg:rt,sidebar:it,route:ct,"keyboard-ins":{focusFilter:"Focus filter",focusSidebar:"Focus sidebar",focusMain:"Focus main area",toggleToc:"Toggle table of content",openGitHub:"Open GitHub",toggleKeyboardIns:"Toggle keyboard instruction",gotoSettings:"Go to settings",closeSidebar:"Close sidebar",clearNotis:"Clear notifications"},settings:lt},ut={filter:"筛选","unread-only":"仅未读",sort:"排序","tag-cloud":"标签云图","sort-method":{default:"默认",newest:"最新",oldest:"最旧"}},_t={update:"有 {0} 个更新！",dev:"调试模式开启于 {0}",welcome:"欢迎来到全新的 icelava.top ~ (ζ{0})","keyboard-ins":"按 ? 查看键盘操作指南"},gt={"log-count":"有 {0} 篇日志","log-title":"标题","update-state":{recent:"新的",unread:"未读",updated:"更新"},"keyboard-ins":"键盘操作指南","loading-cuiping":"加载 Cuiping 中……","loading-katex":"加载 KaTeX 中……","build-info":"版本 {0} 由 {1} 用 Vue 在 {2} 于 {3} 构建"},pt={friends:"友情链接",tags:"标签",home:"首页"},mt={home:"首页",log:"日志","not-found":"页面不存在",tags:"标签",settings:"设置"},ht={names:{scrollBehavior:"滚动方式",sidebarMode:"侧边栏模式"},options:{auto:"自动",smooth:"平滑",manual:"手动"}},ft={op:ut,noti:_t,msg:gt,sidebar:pt,route:mt,"keyboard-ins":{focusSidebar:"聚焦侧边栏",closeSidebar:"关闭侧边栏",focusMain:"聚焦主页面",openGitHub:"打开 GitHub",toggleKeyboardIns:"切换键盘操作指南",focusFilter:"聚焦筛选",toggleToc:"切换目录",gotoSettings:"前往设置",clearNotis:"清除通知"},settings:ht},vt=["zh-CN","en-US"],we=Te("icelavaLocale","zh-CN"),yt={"zh-CN":ft,"en-US":dt},bt=Ke({legacy:!1,locale:we.value,messages:yt}),xt={class:"flag"},kt=w({__name:"Flag",props:{name:null},setup(t){const e={"zh-CN":"🇨🇳","en-US":"🇺🇸"};return(o,r)=>(n(),a("span",xt,g(e[t.name]),1))}}),B={mounted:(t,e)=>{t.tabIndex=0,t.addEventListener("keypress",o=>{o.key==="Enter"&&e.value(o)}),t.addEventListener("click",e.value)}},se="2.7.1",$t=t=>(re("data-v-b78811d2"),t=t(),ie(),t),St={class:"sidebar"},It=["src"],Lt={class:"langs"},Tt={href:"https://github.com/ForkKILLET/ForkKILLET.github.io/",tabindex:"-1"},wt=$t(()=>u("a",{href:"https://github.com/ForkKILLET",tabindex:"-1"},"ForkKILLET",-1)),Nt=w({__name:"SideBar",setup(t){const e="2023-04-20 10:19:41",o="Linux 5.15.0-1035-azure",{t:r,locale:s}=U(),i=d=>{s.value=we.value=d},l=D(()=>[{name:r("sidebar.home"),route:"/"},{name:r("sidebar.tags"),route:"/tags"},{name:r("route.settings"),route:"/settings"},{name:r("sidebar.friends"),route:"/log/log-friends"}]);return(d,m)=>{const h=Z("RouterLink"),F=Z("i18n-t");return n(),a("nav",St,[S(h,{class:"logo-container",to:"/"},{default:N(()=>[u("img",{class:"logo",src:"/FkLog/@banner/icelava.jpg"},null,8,It)]),_:1}),u("div",Lt,[(n(!0),a(I,null,E(c(vt),b=>L((n(),P(kt,{name:b},null,8,["name"])),[[c(B),()=>i(b)]])),256))]),(n(!0),a(I,null,E(c(l),b=>(n(),a("p",null,[S(h,{to:b.route,class:"sidebar-item"},{default:N(()=>[$(g(b.name),1)]),_:2},1032,["to"])]))),256)),S(F,{scope:"global",keypath:"msg.build-info",tag:"p",class:"build-info"},{default:N(()=>[u("a",Tt,"ζ"+g(c(se)),1),wt,u("u",null,g(c(e)),1),u("u",null,g(c(o)),1)]),_:1})])}}});const Et=H(Nt,[["__scopeId","data-v-b78811d2"]]);const Mt={},Ct=t=>(re("data-v-e4880b85"),t=t(),ie(),t),Ft={class:"sidebar-button"},At=Ct(()=>u("span",{class:"sidebar-button-dots"},"···",-1)),Ot=[At];function Bt(t,e){return n(),a("div",Ft,Ot)}const Kt=H(Mt,[["render",Bt],["__scopeId","data-v-e4880b85"]]),Ht=w({__name:"ListTransitionGroup",props:{offset:null},setup(t){return(e,o)=>(n(),a("div",{style:ne({"--offset":t.offset})},[S(He,{name:"list"},{default:N(()=>[Q(e.$slots,"default")]),_:3})],4))}});const Rt={key:0,class:"noti-wrapper"},Vt={class:"noti"},zt={class:"noti-content"},Ut=["onClick"],qt=w({__name:"Notifications",setup(t,{expose:e}){const o=ce([]),r={addNoti:s=>(o.push(s),o.length-1),removeNoti:s=>{var l;const i=o[s];i&&((l=i.onClose)==null||l.call(i),o[s]=void 0)},removeAllNotis:()=>{const s=o.splice(0);return s.forEach(i=>{var l;return(l=i==null?void 0:i.onClose)==null?void 0:l.call(i)}),s}};return e({notiManager:r}),(s,i)=>(n(),a("div",null,[S(Ht,{offset:"50px",class:"notis"},{default:N(()=>[(n(!0),a(I,null,E(o,(l,d)=>(n(),a(I,{key:d},[l?(n(),a("div",Rt,[u("div",Vt,[u("div",zt,g(typeof l.content=="function"?l.content():l.content),1),u("div",{class:"noti-close",onClick:m=>r.removeNoti(d)},"x",8,Ut)])])):K("",!0)],64))),128))]),_:1})]))}});const Dt=H(qt,[["__scopeId","data-v-1c18dd89"]]),Ne=["unread","updated","recent"],te=Object.fromEntries(Ne.map((t,e)=>[t,1<<e])),Gt=t=>Ne.filter((e,o)=>t&1<<o),ve=xe("log",{state:()=>{const t=localStorage.getItem("icelavaLastIndex"),e=()=>t?JSON.parse(t):void 0;return{showToc:!1,index:void 0,lastIndex:e(),origLastIndex:e()}},actions:{async fetchIndex(){if(!this.index){const t=await(await fetch("/FkLog/@meta/index.yml")).text();this.index=Re.load(t).map(e=>{var o,r;return{...e,lastRead:(r=(o=this.lastIndex)==null?void 0:o.find(s=>s.id===e.id))==null?void 0:r.lastRead}}),this.updateLastIndex()}return this.index},updateLastIndex(){localStorage.setItem("icelavaLastIndex",JSON.stringify(this.index))},async getLogById(t){var e;return this.index||await this.fetchIndex(),(e=this.index)==null?void 0:e.find(o=>o.id===t)},async getLogUpdateState(t){var s;let e=0;if(!this.lastIndex)return te.unread;const o=(s=this.origLastIndex)==null?void 0:s.find(i=>i.id===t.id);o||(e|=te.recent);const r=await this.getLogById(t.id);return r.lastRead||(e|=te.unread),new Date(r.lastRead??(o==null?void 0:o.time)??t.time)<new Date(t.time)&&(e|=te.updated),e}}}),ye=Symbol("NotiManager"),jt={class:"index-item"},Pt={class:"index-item-states"},Jt=["data-state"],Yt={class:"index-item-detail"},Wt={class:"index-item-time"},Xt={class:"index-item-tags"},Qt=["onClick"],Zt={key:1},es={class:"index-item-id"},ts=w({__name:"IndexItem",props:{log:null,filterTags:null,updateState:null},emits:["tag-click"],setup(t){const e=t,{t:o}=U(),r=D(()=>e.updateState?Gt(e.updateState):[]);return(s,i)=>{var d;const l=Z("RouterLink");return n(),a("div",jt,[S(l,{to:`/log/${t.log.id}`},{default:N(()=>[$(g(t.log.name),1)]),_:1},8,["to"]),u("small",Pt,[(n(!0),a(I,null,E(c(r),m=>(n(),a("span",{class:"index-item-state","data-state":m},g(c(o)("msg.update-state."+m)),9,Jt))),256))]),u("div",Yt,[u("span",null,[u("small",Wt,g(c(Ve)(t.log.time).format("YYYY-MM-DD HH:MM")),1),u("small",Xt,[(d=t.log.tags)!=null&&d.length?(n(!0),a(I,{key:0},E(t.log.tags,m=>(n(),a("span",{onClick:h=>s.$emit("tag-click",m),class:J(["log-tag index-item-tag",{filtered:t.filterTags?t.filterTags.includes(m):!1}])},g(m),11,Qt))),256)):(n(),a("span",Zt,"None"))])]),u("small",es,g(t.log.id),1)])])}}});const Ee=H(ts,[["__scopeId","data-v-dab7b2eb"]]),ss={class:"index"},os={class:"toolbar"},ns={class:"toolbar-line"},as=["placeholder"],rs=["data-checked"],is={key:0,class:"filter-tags"},cs={class:"log-tag inversed filter-tag"},ls={class:"toolbar-line"},ds=w({__name:"Index",setup(t){const{t:e}=U(),o=ae(),{title:r,tags:s,unreadOnly:i,sort:l}=o.query,d=Array.isArray(s)||!s?s:[s],m=y(typeof r=="string"?r:void 0),h=ce(Array.isArray(d)?d.map(String):[]),F=f=>{h.includes(f)||h.push(f)},b=f=>{const v=h.indexOf(f);v>=0&&h.splice(v,1)},x=y(i==="true"),_=()=>{x.value=!x.value},p=["default","newest","oldest"],T={default:()=>0,oldest:(f,v)=>+f.time-+v.time,newest:(f,v)=>+v.time-+f.time},V=y((f=>p.includes(f))(l)?l:"default"),Y=ve(),W=y(),ue=D(()=>[...Y.index??[]].sort((f,v)=>(X.value[v.id]&14)-(X.value[f.id]&14)||T[V.value](f,v))),k=D(()=>{var f;return(f=ue.value)==null?void 0:f.filter(({id:v,name:C,tags:ge})=>C.includes(m.value??"")&&h.every(Ae=>ge.includes(Ae))&&(!x.value||X.value[v]))}),M=le(),A=()=>({title:m.value,tags:h,unreadOnly:String(x.value),sort:V.value});ee([m,h,x,V],()=>{M.replace({query:A()})});const z=y();let q=!1,_e=0;const X=y({}),Fe=$e(ye),be=async()=>{W.value=await Y.fetchIndex(),X.value=Object.fromEntries(await Promise.all(W.value.map(async f=>{const v=await Y.getLogUpdateState(f);return v&14&&_e++,[f.id,v]}))),!q&&_e&&(q=!0,Fe.addNoti({content:()=>e("noti.update",[_e])}))};return G(async()=>{await be()}),ee(o,async()=>{o.path==="/"?(O.register("focusFilter",{key:"/",action:f=>{var v;(v=z.value)==null||v.focus(),f.preventDefault()}}),await be()):O.dispose("focusFilter")},{immediate:!0}),(f,v)=>(n(),a("div",ss,[u("div",os,[u("p",ns,[u("b",null,g(c(e)("op.filter"))+":",1),L(u("input",{"onUpdate:modelValue":v[0]||(v[0]=C=>m.value=C),ref_key:"filterInputEl",ref:z,class:"filter-input",placeholder:c(e)("msg.log-title")},null,8,as),[[ke,m.value]]),L((n(),a("span",{"data-checked":x.value,class:"filter-button"},[$(g(c(e)("op.unread-only")),1)],8,rs)),[[c(B),_]]),h.length?(n(),a("span",is,[(n(!0),a(I,null,E(h,C=>L((n(),a("span",cs,[$(g(C),1)])),[[c(B),()=>b(C)]])),256))])):K("",!0)]),u("p",ls,[u("b",null,g(c(e)("op.sort"))+":",1),(n(!0),a(I,null,E(c(p),C=>L((n(),a("span",{class:J(["sort-method",{active:V.value===C}])},[$(g(c(e)("op.sort-method."+C)),1)],2)),[[c(B),()=>V.value=C]])),256))])]),W.value?(n(),a(I,{key:0},[u("small",null,g(c(e)("msg.log-count",[c(k).length])),1),(n(!0),a(I,null,E(c(k),C=>(n(),a("div",null,[(n(),P(Ee,{key:C.id,log:C,"filter-tags":h,"update-state":X.value[C.id],onTagClick:v[1]||(v[1]=ge=>F(ge))},null,8,["log","filter-tags","update-state"]))]))),256))],64)):K("",!0)]))}});const us=H(ds,[["__scopeId","data-v-ec8242ee"]]),_s={class:"loading"},gs=w({__name:"Loading",setup(t){let e=y(""),o=null;return G(()=>{const r=["Loading","Loading.","Loading..","Loading..."];let s=0;o=setInterval(()=>{e.value=r[s],++s===r.length&&(s=0)},500)}),ze(()=>{o!==null&&clearInterval(o)}),(r,s)=>(n(),a("span",_s,g(c(e)),1))}}),ps=async(t,e)=>{try{const o=await fetch(t);if(!o.ok){e.err=`${o.status} ${o.statusText}`;return}e.data=await o.text()}catch(o){e.err=o}},ms={style:{color:"red"}},hs=w({__name:"Fetch",props:{url:null,noLoad:{type:Boolean},success:{type:Function}},setup(t,{expose:e}){const o=t,r=y(!0),s=ce({});async function i(){var l;if(!o.noLoad&&(await ps(o.url,s),!s.err))try{await((l=o.success)==null?void 0:l.call(o,s.data))}catch(d){s.err=d}r.value=!1}return e({load:i}),G(i),(l,d)=>r.value?Q(l.$slots,"load",{key:0},()=>[S(gs)]):s.err?Q(l.$slots,"error",{key:1,error:s.err},()=>[u("span",ms,g(s.err),1)]):Q(l.$slots,"default",{key:2,data:s.data})}});const fs={name:"emoji",level:"inline",start(t){var e;return((e=t.match(/:[a-z\d+\-_]+:/))==null?void 0:e.index)??-1},tokenizer(t){const e=t.match(/^:([a-z\d+\-_]+):/);return e?{type:"emoji",raw:e[0],name:e[1]}:void 0},renderer(t){return Ue.emojify(t.raw)}},vs={extensions:[fs]},ys={name:"cuiping",level:"inline",start(t){var e;return((e=t.match(/%%.+?%%/))==null?void 0:e.index)??-1},tokenizer(t){const e=t.match(/^%%(.+?)%%/);return e?{type:"cuiping",raw:e[0],molecule:e[1]}:void 0},renderer(t){const e=document.createElement("div");return e.className="cuiping",e.dataset.molecule=t.molecule,e.outerHTML}},bs={extensions:[ys]};let pe;const xs=(t,e,o)=>{try{return`<span>${t.renderToString(e,o)}</span>`}catch(r){return console.error("KaTeX error: %o",r),`<span class="katex-error">${e}</span>`}},ks={name:"math-block",level:"block",start(t){var e;return((e=t.match(/\${2}(?!\$)/))==null?void 0:e.index)??-1},tokenizer(t){const e=t.match(/^\${2}([^\$]+?)\${2}/);return e?{type:"math-block",raw:e[0],formula:e[1],html:""}:void 0},renderer(t){return t.html}},$s={name:"math-inline",level:"inline",start(t){var e;return((e=t.match(/\$(?!\$)/))==null?void 0:e.index)??-1},tokenizer(t){const e=t.match(/^\$([^\$\n]+?)\$/);return e?{type:"math-inline",raw:e[0],formula:e[1],html:""}:void 0},renderer(t){return t.html}},Ss=t=>({extensions:[ks,$s],async:!0,walkTokens:e=>{var o;if(e.type==="math-block"||e.type==="math-inline")return pe||((o=t.onBeforeLoad)==null||o.call(t),pe=Se(()=>import("./katexWrapper-d15870b1.js"),["assets/katexWrapper-d15870b1.js","assets/katexWrapper-ec47dc46.css"])),pe.then(({katex:r})=>{var s;(s=t.onAfterLoad)==null||s.call(t),e.html=xs(r,e.formula,{strict:!1,displayMode:e.type==="math-block"})})}}),Is={name:"anchor",level:"inline",start(t){var e;return((e=t.match(/#\[.+?\]\(.+?\)/))==null?void 0:e.index)??-1},tokenizer(t){const e=t.match(/^#\[(.+?)\]\((.+?)\)/);return e?{type:"anchor",raw:e[0],content:e[1],id:e[2]}:void 0},renderer(t){return`<span class="anchor" id="${t.id}">${t.content}</span>`}},Ls={extensions:[Is]};me.manual=!0;const Ts=t=>{Ie.use(bs,vs,Ls,Ss(t))},ws={baseUrl:"./FkLog/",highlight:(t,e)=>(e||(e="plain"),me.highlight(t,me.languages[e],e).split(`
`).map((o,r,s,i=s.length.toString().length)=>`<span class="prism-line-number">${" ".repeat(i-(r+1).toString().length)}${r+1}. </span>${o}`).join(`
`))};let fe;const Ns=async()=>{fe=Se(()=>import("./cuiping-component-8cbb70d2.js"),["assets/cuiping-component-8cbb70d2.js","assets/vendor-39cd1860.js"])},Me=t=>(re("data-v-83902b0d"),t=t(),ie(),t),Es={class:"log-content"},Ms={class:"log-toolbar"},Cs={class:"log-to-top"},Fs=Me(()=>u("span",{class:"log-button"},"^",-1)),As=[Fs],Os=Me(()=>u("br",null,null,-1)),Bs={class:"log-toc markdown"},Ks={class:"log-button"},Hs={key:0,class:"log-toc-content"},Rs=["innerHTML","data-lv"],Vs=["innerHTML"],zs={key:0,class:"giscus-container"},Us=w({__name:"Log",setup(t){const o=$e(ye),{t:r}=U(),s=le(),i=ae(),l=D(()=>i.params.id),d=ve(),{showToc:m}=qe(d),h=de(),F=y(null),b=y(null),x=async k=>{F.value=await Ie(k,ws)},_=y(),p=()=>{var k;(d.showToc=!d.showToc)&&((k=document.querySelector(".log-toc"))==null||k.focus())},T=k=>{if(!b.value)return;const M=b.value.querySelector(`[id="${k}"]`);if(!M)return;const A=document.querySelector("main"),z=M.tagName==="SPAN"?-10:0;A.scrollTo({top:M.offsetTop-A.offsetTop+z,behavior:h.scrollBehavior}),s.replace({query:{anchor:k}})};let R=null;const V=()=>{const{anchor:k}=i.query;typeof k=="string"&&(R!==null&&(clearTimeout(R),R=null),R=setTimeout(()=>{T(k),R=null}))},Y=k=>{_.value=Array.from(k.querySelectorAll("h1, h2, .anchor")).map(M=>({lv:M.tagName==="SPAN"?3:+M.tagName.slice(1),id:M.id,html:M.innerHTML}))},W=()=>{document.querySelector("main").scrollTo({top:0,behavior:h.scrollBehavior})},ue=async k=>{const M=k.querySelectorAll(".cuiping");if(M.length){let A=null;fe||(A=o.addNoti({content:()=>r("msg.loading-cuiping")}),Ns());const{Cuiping:z}=await fe;A!==null&&o.removeNoti(A),M.forEach(q=>{q.dataset.vApp||Le(z,{molecule:q.dataset.molecule}).mount(q)})}};return ee(b,()=>{b.value&&(Y(b.value),ue(b.value),V())}),ee(i,async()=>{i.path.startsWith("/log/")?(V(),O.dispose("toggleToc"),O.register("toggleToc",{key:"t",action:()=>p()})):O.dispose("toggleToc")},{immediate:!0}),G(async()=>{const k=await d.getLogById(l.value);k&&(k.lastRead=new Date,d.updateLastIndex())}),(k,M)=>(n(),a("div",Es,[(n(),P(hs,{key:c(l),url:`/FkLog/${c(l)}`,success:x},{default:N(()=>[u("div",Ms,[L((n(),a("div",Cs,As)),[[c(B),W]]),Os,u("div",Bs,[L((n(),a("span",Ks,[$("#")])),[[c(B),p]]),c(m)?(n(),a("ul",Hs,[(n(!0),a(I,null,E(_.value,({lv:A,id:z,html:q})=>L((n(),a("li",{innerHTML:q,key:z,"data-lv":A,class:"log-toc-item"},null,8,Rs)),[[c(B),()=>T(z)]])),128))])):K("",!0)])]),u("div",{ref_key:"markdownArea",ref:b,class:"log-text markdown",innerHTML:F.value},null,8,Vs),!c(!1)&&F.value?(n(),a("div",zs,[S(c(De),{repo:"ForkKILLET/FkLog","repo-id":"R_kgDOHeN7yQ",category:"Announcements","category-id":"DIC_kwDOHeN7yc4CTXKN",mapping:"specific",term:c(l),theme:"preferred_color_scheme",lang:"zh-CN"},null,8,["term"])])):K("",!0)]),error:N(A=>[$(g(A),1)]),_:1},8,["url"]))]))}});const qs=H(Us,[["__scopeId","data-v-83902b0d"]]),Ds=w({__name:"DropTransition",props:{height:null},setup(t){return(e,o)=>(n(),a("div",{style:ne({"--height":t.height})},[S(oe,{name:"drop"},{default:N(()=>[Q(e.$slots,"default")]),_:3})],4))}});const Gs={class:"toolbar"},js={class:"toolbar-button"},Ps={key:0,class:"toolbar-close"},Js={class:"tag-graph"},Ys=["onClick"],Ws={class:"tag-group"},Xs={class:"tag-group-header"},Qs=["data-tag"],Zs=w({__name:"Tags",setup(t){const{t:e}=U(),o=de(),r=ve(),s=y(),i=y(),l=document.querySelector("main"),d=y(!1),m=()=>{d.value=!0,l.scrollTo({top:0})},h=()=>{d.value=!1},F=b=>{const x=document.querySelector(`[data-tag=${b}]`),_=document.querySelector("main"),p=-40;_.scrollTo({top:x.offsetTop-_.offsetTop+p,behavior:o.scrollBehavior})};return G(async()=>{const b=await r.fetchIndex(),x={},_=p=>x[p]??(x[p]={logs:[],paddings:[5+(Math.random()*1e5|0)%10,(Math.random()*1e5|0)%25]});b.forEach(p=>{p.tags.length?p.tags.forEach(T=>{_(T).logs.push(p)}):_("No tags").logs.push(p)}),s.value=x,i.value=Object.values(s.value).reduce((p,T)=>Math.max(p,T.logs.length),0)}),(b,x)=>(n(),a("div",null,[u("div",Gs,[L((n(),a("b",js,[$(g(c(e)("op.tag-cloud")),1)])),[[c(B),m]]),d.value?L((n(),a("b",Ps,[$("x")])),[[c(B),h]]):K("",!0)]),S(Ds,{name:"drop",height:"50vh"},{default:N(()=>[L(u("div",Js,[(n(!0),a(I,null,E(s.value,({logs:_,paddings:[p,T]},R)=>(n(),a("div",{onClick:V=>F(R),class:"tag-cloud",key:R,style:ne({padding:`${p}px ${T}px`})},[u("span",{class:"log-tag",style:ne({fontSize:.8+1.2*_.length/i.value+"em"})},g(R)+" · "+g(_.length),5)],12,Ys))),128))],512),[[he,d.value]])]),_:1}),(n(!0),a(I,null,E(s.value,({logs:_},p)=>(n(),a("div",Ws,[u("div",Xs,[u("span",{class:"log-tag","data-tag":p},g(p),9,Qs),$(),u("span",null,"("+g(_.length)+")",1)]),(n(!0),a(I,null,E(_,T=>(n(),P(Ee,{log:T},null,8,["log"]))),256))]))),256))]))}});const eo=H(Zs,[["__scopeId","data-v-31566bc7"]]),to={class:"settings"},so={class:"setting-item"},oo={class:"setting-name"},no={key:0,class:"setting-options"},ao={class:"setting-option"},ro=w({__name:"Settings",setup(t){const{t:e}=U(),o=de(),r=(s,i)=>{o[s]=i,o.updateSettings()};return(s,i)=>(n(),a("div",to,[(n(!0),a(I,null,E(c(Xe),(l,d)=>(n(),a("div",so,[u("b",oo,g(c(e)("settings.names."+d)),1),l.type==="union"?(n(),a("div",no,[(n(!0),a(I,null,E(l.options,(m,h)=>(n(),a("span",ao,[$(g(h?" · ":"")+" ",1),L((n(),a("span",{class:J({"setting-option-button":!0,active:c(o)[d]===m})},[$(g(c(e)("settings.options."+m)),1)],2)),[[c(B),()=>r(d,m)]])]))),256))])):K("",!0)]))),256))]))}});const io=H(ro,[["__scopeId","data-v-5a4f0517"]]),co=t=>(re("data-v-846fa2d8"),t=t(),ie(),t),lo={class:"root"},uo=["onKeypress"],_o={key:0},go={key:1},po=co(()=>u("span",{style:{color:"#39C5BB"}},"Miku",-1)),mo={key:2,class:"go-to-next"},ho=w({__name:"NotFoundView",setup(t){const e=ae(),o=le(),r=y(e.path.slice(1)),s=()=>{o.replace("/"+r.value)};return(i,l)=>{const d=Z("RouterLink");return n(),a("div",lo,[u("p",null,[$(" Sorry but we don't have "),L(u("input",{type:"text","onUpdate:modelValue":l[0]||(l[0]=m=>r.value=m),onKeypress:Ge(s,["enter"])},null,40,uo),[[ke,r.value]]),$(" :( ")]),c(e).path==="/anything"?(n(),a("p",_o,[$(" Nah. At least we do have a "),S(d,{to:"/"},{default:N(()=>[$("Home")]),_:1}),$("! ")])):c(e).path.toLowerCase()==="/miku"?(n(),a("p",go,[$(" Nah. "),po,$(" is real! ")])):K("",!0),r.value!==c(e).path.slice(1)?L((n(),a("div",mo,[$("Next step!")])),[[c(B),s]]):K("",!0)])}}});const fo=H(ho,[["__scopeId","data-v-846fa2d8"]]),vo=[{path:"/",component:us,name:"home"},{path:"/log/:id",component:qs,name:"log"},{path:"/tags",component:eo,name:"tags"},{path:"/settings",component:io,name:"settings"},{path:"/:anyway(.*)*",component:fo,name:"not-found"}],Ce=je({history:Pe(),routes:vo}),j=ce({}),O={register:(t,e)=>j[t]?!1:(j[t]=e,!0),dispose:t=>delete j[t]};window.addEventListener("keydown",t=>{var e,o;if(((e=t.target)==null?void 0:e.tagName)!=="INPUT")for(const r in j){const s=j[r];((o=s.enabled)==null?void 0:o.call(s))!==!1&&s.key===t.key&&(!s.ctrl||t.ctrlKey)&&s.action(t)}});O.register("focusMain",{key:"m",action:()=>{var t;(t=document.querySelector("main"))==null||t.focus()}});O.register("openGitHub",{key:"G",action:()=>{window.open("https://github.com/ForkKILLET/ForkKILLET.github.io/")}});O.register("gotoSettings",{key:",",ctrl:!0,action:()=>{Ce.push("/settings")}});const yo={class:"keyboard-ins"},bo={class:"ins-table"},xo={key:0,class:"ins-item"},ko=w({__name:"KeyboardInstruction",emits:["close"],setup(t,{emit:e}){const{t:o}=U();return(r,s)=>(n(),a("div",yo,[u("h3",null,g(c(o)("msg.keyboard-ins")),1),u("span",{class:"toolbar-close",onClick:s[0]||(s[0]=i=>e("close"))},"x"),u("div",bo,[(n(!0),a(I,null,E(c(j),(i,l)=>{var d;return n(),a(I,null,[((d=i.enabled)==null?void 0:d.call(i))!==!1?(n(),a("p",xo,[u("kbd",null,g((i.ctrl?"Ctrl + ":"")+i.key),1),$(),u("span",null,g(c(o)("keyboard-ins."+l)),1)])):K("",!0)],64)}),256))])]))}});const $o=H(ko,[["__scopeId","data-v-11022259"]]),So={class:"root"},Io=w({__name:"App",setup(t){const{t:e}=U(),o=de(),r=window.matchMedia("screen and (min-width: 601px"),s=D(()=>o.sidebarMode==="auto"),i=y(r.matches),l=D(()=>s.value&&i.value),d=y(!1);r.addEventListener("change",_=>{s.value&&(i.value=_.matches,d.value=!_.matches)});const m=()=>{d.value=!d.value},h=Te("version",void 0),F=y();G(()=>{const _=F.value.notiManager;O.register("clearNotis",{key:"c",action:()=>{_.removeAllNotis()}});{let p;Ts({onBeforeLoad:()=>{p=_.addNoti({content:()=>e("msg.loading-katex")})},onAfterLoad:()=>{_.removeNoti(p)}})}(!h.value||h.value!==se)&&(h.value=se,_.addNoti({content:()=>e("noti.welcome",[se])}),_.addNoti({content:()=>e("noti.keyboard-ins")})),Ye(ye,_)}),le().afterEach((_,p)=>{var T;_.path!==p.path&&((T=document.querySelector("main"))==null||T.focus())});const x=y(!1);return O.register("toggleKeyboardIns",{key:"?",action:()=>{x.value=!x.value}}),O.register("focusSidebar",{key:"s",action:()=>{!l.value&&!d.value&&(d.value=!0),Je(()=>{var _;(_=document.querySelector(".sidebar-item"))==null||_.focus()})}}),O.register("closeSidebar",{key:"Escape",action:_=>{d.value&&(_.preventDefault(),d.value=!1)},enabled:()=>d.value}),(_,p)=>(n(),a("div",So,[u("div",{class:J(["mask",{active:!c(l)&&d.value}])},null,2),S(oe,{name:"side"},{default:N(()=>[L(S(Et,{class:J({docking:!c(s)||!c(l)})},null,8,["class"]),[[he,c(l)||d.value]])]),_:1}),L(S(Kt,null,null,512),[[c(B),m]]),S(Dt,{ref_key:"notifications",ref:F},null,512),S(ot),S(oe,{name:"fade"},{default:N(()=>[L(S($o,{onClose:p[0]||(p[0]=T=>x.value=!1)},null,512),[[he,x.value]])]),_:1})]))}});const Lo=H(Io,[["__scopeId","data-v-a277d0e4"]]);Le(Lo).use(bt).use(Ce).use(We()).mount("#app");
